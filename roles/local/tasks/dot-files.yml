---
- name: create symlink to core dot files
  file: src={{ role_path }}/files/{{ item }} dest={{ ansible_env.HOME }}/{{ item }} force=yes state=link
  with_items:
    - .tmux.conf
    - .profile 
    - .gitignore
    - .vimrc
    - .bash_aliases  

- name: assembled all bashrc fragments
  assemble: src={{ role_path }}/files/.bashrc.d dest={{ ansible_env.HOME }}/.bashrc.assemble delimiter="#######"

- name: apply assembled file
  lineinfile: dest={{ ansible_env.HOME }}/.bashrc line=". .bashrc.assemble" insertafter=EOF state=present
